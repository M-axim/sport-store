"use strict"; // JS-ФУНКЦИЯ ОПРЕДЕЛЕНИЯ ПОДДЕРЖКИ WEBP

function testWebP(callback) {
  var webP = new Image();

  webP.onload = webP.onerror = function () {
    callback(webP.height == 2);
  };

  webP.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (support) {
  if (support == true) {
    document.querySelector('body').classList.add('webp');
  } else {
    document.querySelector('body').classList.add('no-webp');
  }
});

function ibg() {
  var ibg = document.querySelectorAll(".ibg");

  for (var i = 0; i < ibg.length; i++) {
    if (ibg[i].querySelector('img')) {
      ibg[i].style.backgroundImage = 'url(' + ibg[i].querySelector('img').getAttribute('src') + ')';
    }
  }
}

ibg();
jQuery(function () {
  jQuery('.menu__icon').click(function (event) {
    jQuery('.menu__icon, .menu__body').toggleClass('active');
    jQuery('body').toggleClass('lock');
  });
  jQuery('.menu-line__label').click(function (event) {
    jQuery('.menu__icon, .menu__body').removeClass('active');
    jQuery('body').removeClass('lock');
  });
}); // Dynamic Adapt v.1
// HTML data-da="where(uniq class name),when(breakpoint),position(digi)"
// e.x. data-da=".item,992,2"
// Andrikanych Yevhen 2020
// https://www.youtube.com/c/freelancerlifestyle

function DynamicAdapt(type) {
  this.type = type;
}

DynamicAdapt.prototype.init = function () {
  var _this2 = this;

  var _this = this; // массив объектов


  this.оbjects = [];
  this.daClassname = "_dynamic_adapt_"; // массив DOM-элементов

  this.nodes = document.querySelectorAll("[data-da]"); // наполнение оbjects объктами

  for (var i = 0; i < this.nodes.length; i++) {
    var node = this.nodes[i];
    var data = node.dataset.da.trim();
    var dataArray = data.split(",");
    var оbject = {};
    оbject.element = node;
    оbject.parent = node.parentNode;
    оbject.destination = document.querySelector(dataArray[0].trim());
    оbject.breakpoint = dataArray[1] ? dataArray[1].trim() : "767";
    оbject.place = dataArray[2] ? dataArray[2].trim() : "last";
    оbject.index = this.indexInParent(оbject.parent, оbject.element);
    this.оbjects.push(оbject);
  }

  this.arraySort(this.оbjects); // массив уникальных медиа-запросов

  this.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {
    return '(' + this.type + "-width: " + item.breakpoint + "px)," + item.breakpoint;
  }, this);
  this.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {
    return Array.prototype.indexOf.call(self, item) === index;
  }); // навешивание слушателя на медиа-запрос
  // и вызов обработчика при первом запуске

  var _loop = function _loop(_i) {
    var media = _this2.mediaQueries[_i];
    var mediaSplit = String.prototype.split.call(media, ',');
    var matchMedia = window.matchMedia(mediaSplit[0]);
    var mediaBreakpoint = mediaSplit[1]; // массив объектов с подходящим брейкпоинтом

    var оbjectsFilter = Array.prototype.filter.call(_this2.оbjects, function (item) {
      return item.breakpoint === mediaBreakpoint;
    });
    matchMedia.addListener(function () {
      _this.mediaHandler(matchMedia, оbjectsFilter);
    });

    _this2.mediaHandler(matchMedia, оbjectsFilter);
  };

  for (var _i = 0; _i < this.mediaQueries.length; _i++) {
    _loop(_i);
  }
};

DynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {
  if (matchMedia.matches) {
    for (var i = 0; i < оbjects.length; i++) {
      var оbject = оbjects[i];
      оbject.index = this.indexInParent(оbject.parent, оbject.element);
      this.moveTo(оbject.place, оbject.element, оbject.destination);
    }
  } else {
    for (var _i2 = 0; _i2 < оbjects.length; _i2++) {
      var _bject = оbjects[_i2];

      if (_bject.element.classList.contains(this.daClassname)) {
        this.moveBack(_bject.parent, _bject.element, _bject.index);
      }
    }
  }
}; // Функция перемещения


DynamicAdapt.prototype.moveTo = function (place, element, destination) {
  element.classList.add(this.daClassname);

  if (place === 'last' || place >= destination.children.length) {
    destination.insertAdjacentElement('beforeend', element);
    return;
  }

  if (place === 'first') {
    destination.insertAdjacentElement('afterbegin', element);
    return;
  }

  destination.children[place].insertAdjacentElement('beforebegin', element);
}; // Функция возврата


DynamicAdapt.prototype.moveBack = function (parent, element, index) {
  element.classList.remove(this.daClassname);

  if (parent.children[index] !== undefined) {
    parent.children[index].insertAdjacentElement('beforebegin', element);
  } else {
    parent.insertAdjacentElement('beforeend', element);
  }
}; // Функция получения индекса внутри родителя


DynamicAdapt.prototype.indexInParent = function (parent, element) {
  var array = Array.prototype.slice.call(parent.children);
  return Array.prototype.indexOf.call(array, element);
}; // Функция сортировки массива по breakpoint и place 
// по возрастанию для this.type = min
// по убыванию для this.type = max


DynamicAdapt.prototype.arraySort = function (arr) {
  if (this.type === "min") {
    Array.prototype.sort.call(arr, function (a, b) {
      if (a.breakpoint === b.breakpoint) {
        if (a.place === b.place) {
          return 0;
        }

        if (a.place === "first" || b.place === "last") {
          return -1;
        }

        if (a.place === "last" || b.place === "first") {
          return 1;
        }

        return a.place - b.place;
      }

      return a.breakpoint - b.breakpoint;
    });
  } else {
    Array.prototype.sort.call(arr, function (a, b) {
      if (a.breakpoint === b.breakpoint) {
        if (a.place === b.place) {
          return 0;
        }

        if (a.place === "first" || b.place === "last") {
          return 1;
        }

        if (a.place === "last" || b.place === "first") {
          return -1;
        }

        return b.place - a.place;
      }

      return b.breakpoint - a.breakpoint;
    });
    return;
  }
};

var da = new DynamicAdapt("max");
da.init();
jQuery(function () {
  jQuery('.spoiler__burger').click(function (event) {
    jQuery(this).toggleClass('active');
    jQuery('.spoiler__content').slideToggle(200);

    if (window.matchMedia("(min-width: 993px)").matches) {
      jQuery('.dropdown-spoiler').toggleClass('visible');
    }
  });

  if (window.matchMedia("(max-width: 992px)").matches) {
    jQuery('.spoiler__label-dropdown').click(function (event) {
      var _this = this;

      jQuery(_this).toggleClass('active');
      var dropdown = $(_this).find($('.dropdown-spoiler'));
      dropdown.slideToggle(300);
    });
    jQuery('.spoiler__label-dropdown .spoiler__link').click(function (e) {
      e.preventDefault();
    });
    jQuery('.form-content__label').click(function (e) {
      $(this).toggleClass('active');
    });
  }
});
jQuery(function () {
  jQuery('.slider__wrapper').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    infinite: true,
    dots: false,
    arrows: true,
    mobileFirst: true,
    prevArrow: '<div class="arrow arrow__left">&#60&#60</div>',
    nextArrow: '<div class="arrow arrow__right">&#62&#62</div>',
    responsive: [{
      breakpoint: 768,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
        dots: true,
        arrows: false,
        mobileFirst: true,
        customPaging: function customPaging(slider, i) {
          var imageSrc = $(slider.$slides[i]).find('img').attr('src');
          return "<img src=\"".concat(imageSrc, "\" alt=\"slide here\" data-index=\"").concat(i, "\">");
        }
      }
    }]
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidGVzdFdlYlAiLCJjYWxsYmFjayIsIndlYlAiLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJoZWlnaHQiLCJzcmMiLCJzdXBwb3J0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwiaWJnIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImdldEF0dHJpYnV0ZSIsImpRdWVyeSIsImNsaWNrIiwiZXZlbnQiLCJ0b2dnbGVDbGFzcyIsInJlbW92ZUNsYXNzIiwiRHluYW1pY0FkYXB0IiwidHlwZSIsInByb3RvdHlwZSIsImluaXQiLCJfdGhpcyIsItC+YmplY3RzIiwiZGFDbGFzc25hbWUiLCJub2RlcyIsIm5vZGUiLCJkYXRhIiwiZGF0YXNldCIsImRhIiwidHJpbSIsImRhdGFBcnJheSIsInNwbGl0Iiwi0L5iamVjdCIsImVsZW1lbnQiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwiZGVzdGluYXRpb24iLCJicmVha3BvaW50IiwicGxhY2UiLCJpbmRleCIsImluZGV4SW5QYXJlbnQiLCJwdXNoIiwiYXJyYXlTb3J0IiwibWVkaWFRdWVyaWVzIiwiQXJyYXkiLCJtYXAiLCJjYWxsIiwiaXRlbSIsImZpbHRlciIsInNlbGYiLCJpbmRleE9mIiwibWVkaWEiLCJtZWRpYVNwbGl0IiwiU3RyaW5nIiwibWF0Y2hNZWRpYSIsIndpbmRvdyIsIm1lZGlhQnJlYWtwb2ludCIsItC+YmplY3RzRmlsdGVyIiwiYWRkTGlzdGVuZXIiLCJtZWRpYUhhbmRsZXIiLCJtYXRjaGVzIiwibW92ZVRvIiwiY29udGFpbnMiLCJtb3ZlQmFjayIsImNoaWxkcmVuIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwicmVtb3ZlIiwidW5kZWZpbmVkIiwiYXJyYXkiLCJzbGljZSIsImFyciIsInNvcnQiLCJhIiwiYiIsInNsaWRlVG9nZ2xlIiwiZHJvcGRvd24iLCIkIiwiZmluZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNsaWNrIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJpbmZpbml0ZSIsImRvdHMiLCJhcnJvd3MiLCJtb2JpbGVGaXJzdCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInJlc3BvbnNpdmUiLCJzZXR0aW5ncyIsImN1c3RvbVBhZ2luZyIsInNsaWRlciIsImltYWdlU3JjIiwiJHNsaWRlcyIsImF0dHIiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FFQTs7QUFDQSxTQUFTQSxRQUFULENBQWtCQyxRQUFsQixFQUE0QjtBQUV4QixNQUFJQyxJQUFJLEdBQUcsSUFBSUMsS0FBSixFQUFYOztBQUNBRCxFQUFBQSxJQUFJLENBQUNFLE1BQUwsR0FBY0YsSUFBSSxDQUFDRyxPQUFMLEdBQWUsWUFBWTtBQUNyQ0osSUFBQUEsUUFBUSxDQUFDQyxJQUFJLENBQUNJLE1BQUwsSUFBZSxDQUFoQixDQUFSO0FBQ0gsR0FGRDs7QUFHQUosRUFBQUEsSUFBSSxDQUFDSyxHQUFMLEdBQVcsaUhBQVg7QUFDSDs7QUFFRFAsUUFBUSxDQUFDLFVBQVVRLE9BQVYsRUFBbUI7QUFFeEIsTUFBSUEsT0FBTyxJQUFJLElBQWYsRUFBcUI7QUFDakJDLElBQUFBLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixNQUF2QixFQUErQkMsU0FBL0IsQ0FBeUNDLEdBQXpDLENBQTZDLE1BQTdDO0FBQ0gsR0FGRCxNQUVPO0FBQ0hILElBQUFBLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixNQUF2QixFQUErQkMsU0FBL0IsQ0FBeUNDLEdBQXpDLENBQTZDLFNBQTdDO0FBQ0g7QUFDSixDQVBPLENBQVI7O0FBU0EsU0FBU0MsR0FBVCxHQUFjO0FBRVYsTUFBSUEsR0FBRyxHQUFFSixRQUFRLENBQUNLLGdCQUFULENBQTBCLE1BQTFCLENBQVQ7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixHQUFHLENBQUNHLE1BQXhCLEVBQWdDRCxD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QVVDLE1BQVYsRUFBa0JyRixDQUFsQixFQUFxQjtBQUMvQixjQUFJc0YsUUFBUSxHQUFHakIsQ0FBQyxDQUFDZ0IsTUFBTSxDQUFDRSxPQUFQLENBQWV2RixDQUFmLENBQUQsQ0FBRCxDQUFxQnNFLElBQXJCLENBQTBCLEtBQTFCLEVBQWlDa0IsSUFBakMsQ0FBc0MsS0FBdEMsQ0FBZjtBQUNBLHNDQUFvQkYsUUFBcEIsZ0RBQThEdEYsQ0FBOUQ7QUFDSDtBQVRLO0FBRmQsS0FEUTtBQVRpQixHQUFqQztBQTBCSCxDQTVCSyxDQUFOIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIEpTLdCk0KPQndCa0KbQmNCvINCe0J/QoNCV0JTQldCb0JXQndCY0K8g0J/QntCU0JTQldCg0JbQmtCYIFdFQlBcbmZ1bmN0aW9uIHRlc3RXZWJQKGNhbGxiYWNrKSB7XG5cbiAgICB2YXIgd2ViUCA9IG5ldyBJbWFnZSgpO1xuICAgIHdlYlAub25sb2FkID0gd2ViUC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayh3ZWJQLmhlaWdodCA9PSAyKTtcbiAgICB9O1xuICAgIHdlYlAuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSam9BQUFCWFJVSlFWbEE0SUM0QUFBQ3lBZ0NkQVNvQ0FBSUFMbWswbWswaUlpSWlJZ0JvU3lnQUJjNldXZ0FBL3ZlZmYvMFBQOGJBLy9Md1lBQUFcIjtcbn1cblxudGVzdFdlYlAoZnVuY3Rpb24gKHN1cHBvcnQpIHtcblxuICAgIGlmIChzdXBwb3J0ID09IHRydWUpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ3dlYnAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnbm8td2VicCcpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBpYmcoKXtcblxuICAgIGxldCBpYmc9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaWJnXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWJnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKGliZ1tpXS5xdWVyeVNlbGVjdG9yKCdpbWcnKSl7XG4gICAgICAgICAgICBpYmdbaV0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnK2liZ1tpXS5xdWVyeVNlbGVjdG9yKCdpbWcnKS5nZXRBdHRyaWJ1dGUoJ3NyYycpKycpJztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuaWJnKCk7XG5cbmpRdWVyeShmdW5jdGlvbiAoKSB7XG5cbiAgICBqUXVlcnkoJy5tZW51X19pY29uJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGpRdWVyeSgnLm1lbnVfX2ljb24sIC5tZW51X19ib2R5JykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBqUXVlcnkoJ2JvZHknKS50b2dnbGVDbGFzcygnbG9jaycpO1xuICAgIH0pO1xuXG4gICAgalF1ZXJ5KCcubWVudS1saW5lX19sYWJlbCcpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBqUXVlcnkoJy5tZW51X19pY29uLCAubWVudV9fYm9keScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgalF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xvY2snKTtcbiAgICB9KVxuXG59KTtcblxuLy8gRHluYW1pYyBBZGFwdCB2LjFcbi8vIEhUTUwgZGF0YS1kYT1cIndoZXJlKHVuaXEgY2xhc3MgbmFtZSksd2hlbihicmVha3BvaW50KSxwb3NpdGlvbihkaWdpKVwiXG4vLyBlLnguIGRhdGEtZGE9XCIuaXRlbSw5OTIsMlwiXG4vLyBBbmRyaWthbnljaCBZZXZoZW4gMjAyMFxuLy8gaHR0cHM6Ly93d3cueW91dHViZS5jb20vYy9mcmVlbGFuY2VybGlmZXN0eWxlXG5cbmZ1bmN0aW9uIER5bmFtaWNBZGFwdCh0eXBlKSB7XG5cdHRoaXMudHlwZSA9IHR5cGU7XG59XG5cbkR5bmFtaWNBZGFwdC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0Y29uc3QgX3RoaXMgPSB0aGlzO1xuXHQvLyDQvNCw0YHRgdC40LIg0L7QsdGK0LXQutGC0L7QslxuXHR0aGlzLtC+YmplY3RzID0gW107XG5cdHRoaXMuZGFDbGFzc25hbWUgPSBcIl9keW5hbWljX2FkYXB0X1wiO1xuXHQvLyDQvNCw0YHRgdC40LIgRE9NLdGN0LvQtdC80LXQvdGC0L7QslxuXHR0aGlzLm5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWRhXVwiKTtcblxuXHQvLyDQvdCw0L/QvtC70L3QtdC90LjQtSDQvmJqZWN0cyDQvtCx0YrQutGC0LDQvNC4XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVzW2ldO1xuXHRcdGNvbnN0IGRhdGEgPSBub2RlLmRhdGFzZXQuZGEudHJpbSgpO1xuXHRcdGNvbnN0IGRhdGFBcnJheSA9IGRhdGEuc3BsaXQoXCIsXCIpO1xuXHRcdGNvbnN0INC+YmplY3QgPSB7fTtcblx0XHTQvmJqZWN0LmVsZW1lbnQgPSBub2RlO1xuXHRcdNC+YmplY3QucGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXHRcdNC+YmplY3QuZGVzdGluYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGFBcnJheVswXS50cmltKCkpO1xuXHRcdNC+YmplY3QuYnJlYWtwb2ludCA9IGRhdGFBcnJheVsxXSA/IGRhdGFBcnJheVsxXS50cmltKCkgOiBcIjc2N1wiO1xuXHRcdNC+YmplY3QucGxhY2UgPSBkYXRhQXJyYXlbMl0gPyBkYXRhQXJyYXlbMl0udHJpbSgpIDogXCJsYXN0XCI7XG5cdFx00L5iamVjdC5pbmRleCA9IHRoaXMuaW5kZXhJblBhcmVudCjQvmJqZWN0LnBhcmVudCwg0L5iamVjdC5lbGVtZW50KTtcblx0XHR0aGlzLtC+YmplY3RzLnB1c2go0L5iamVjdCk7XG5cdH1cblxuXHR0aGlzLmFycmF5U29ydCh0aGlzLtC+YmplY3RzKTtcblxuXHQvLyDQvNCw0YHRgdC40LIg0YPQvdC40LrQsNC70YzQvdGL0YUg0LzQtdC00LjQsC3Qt9Cw0L/RgNC+0YHQvtCyXG5cdHRoaXMubWVkaWFRdWVyaWVzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMu0L5iamVjdHMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0cmV0dXJuICcoJyArIHRoaXMudHlwZSArIFwiLXdpZHRoOiBcIiArIGl0ZW0uYnJlYWtwb2ludCArIFwicHgpLFwiICsgaXRlbS5icmVha3BvaW50O1xuXHR9LCB0aGlzKTtcblx0dGhpcy5tZWRpYVF1ZXJpZXMgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5tZWRpYVF1ZXJpZXMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgc2VsZikge1xuXHRcdHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHNlbGYsIGl0ZW0pID09PSBpbmRleDtcblx0fSk7XG5cblx0Ly8g0L3QsNCy0LXRiNC40LLQsNC90LjQtSDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCDQvNC10LTQuNCwLdC30LDQv9GA0L7RgVxuXHQvLyDQuCDQstGL0LfQvtCyINC+0LHRgNCw0LHQvtGC0YfQuNC60LAg0L/RgNC4INC/0LXRgNCy0L7QvCDQt9Cw0L/Rg9GB0LrQtVxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVkaWFRdWVyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgbWVkaWEgPSB0aGlzLm1lZGlhUXVlcmllc1tpXTtcblx0XHRjb25zdCBtZWRpYVNwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKG1lZGlhLCAnLCcpO1xuXHRcdGNvbnN0IG1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShtZWRpYVNwbGl0WzBdKTtcblx0XHRjb25zdCBtZWRpYUJyZWFrcG9pbnQgPSBtZWRpYVNwbGl0WzFdO1xuXG5cdFx0Ly8g0LzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0YEg0L/QvtC00YXQvtC00Y/RidC40Lwg0LHRgNC10LnQutC/0L7QuNC90YLQvtC8XG5cdFx0Y29uc3Qg0L5iamVjdHNGaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy7QvmJqZWN0cywgZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdHJldHVybiBpdGVtLmJyZWFrcG9pbnQgPT09IG1lZGlhQnJlYWtwb2ludDtcblx0XHR9KTtcblx0XHRtYXRjaE1lZGlhLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcblx0XHRcdF90aGlzLm1lZGlhSGFuZGxlcihtYXRjaE1lZGlhLCDQvmJqZWN0c0ZpbHRlcik7XG5cdFx0fSk7XG5cdFx0dGhpcy5tZWRpYUhhbmRsZXIobWF0Y2hNZWRpYSwg0L5iamVjdHNGaWx0ZXIpO1xuXHR9XG59O1xuXG5EeW5hbWljQWRhcHQucHJvdG90eXBlLm1lZGlhSGFuZGxlciA9IGZ1bmN0aW9uIChtYXRjaE1lZGlhLCDQvmJqZWN0cykge1xuXHRpZiAobWF0Y2hNZWRpYS5tYXRjaGVzKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCDQvmJqZWN0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3Qg0L5iamVjdCA9INC+YmplY3RzW2ldO1xuXHRcdFx00L5iamVjdC5pbmRleCA9IHRoaXMuaW5kZXhJblBhcmVudCjQvmJqZWN0LnBhcmVudCwg0L5iamVjdC5lbGVtZW50KTtcblx0XHRcdHRoaXMubW92ZVRvKNC+YmplY3QucGxhY2UsINC+YmplY3QuZWxlbWVudCwg0L5iamVjdC5kZXN0aW5hdGlvbik7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwg0L5iamVjdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0INC+YmplY3QgPSDQvmJqZWN0c1tpXTtcblx0XHRcdGlmICjQvmJqZWN0LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZGFDbGFzc25hbWUpKSB7XG5cdFx0XHRcdHRoaXMubW92ZUJhY2so0L5iamVjdC5wYXJlbnQsINC+YmplY3QuZWxlbWVudCwg0L5iamVjdC5pbmRleCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyDQpNGD0L3QutGG0LjRjyDQv9C10YDQtdC80LXRidC10L3QuNGPXG5EeW5hbWljQWRhcHQucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uIChwbGFjZSwgZWxlbWVudCwgZGVzdGluYXRpb24pIHtcblx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZGFDbGFzc25hbWUpO1xuXHRpZiAocGxhY2UgPT09ICdsYXN0JyB8fCBwbGFjZSA+PSBkZXN0aW5hdGlvbi5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRkZXN0aW5hdGlvbi5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcsIGVsZW1lbnQpO1xuXHRcdHJldHVybjtcblx0fVxuXHRpZiAocGxhY2UgPT09ICdmaXJzdCcpIHtcblx0XHRkZXN0aW5hdGlvbi5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlbGVtZW50KTtcblx0XHRyZXR1cm47XG5cdH1cblx0ZGVzdGluYXRpb24uY2hpbGRyZW5bcGxhY2VdLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCBlbGVtZW50KTtcbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0LLQvtC30LLRgNCw0YLQsFxuRHluYW1pY0FkYXB0LnByb3RvdHlwZS5tb3ZlQmFjayA9IGZ1bmN0aW9uIChwYXJlbnQsIGVsZW1lbnQsIGluZGV4KSB7XG5cdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmRhQ2xhc3NuYW1lKTtcblx0aWYgKHBhcmVudC5jaGlsZHJlbltpbmRleF0gIT09IHVuZGVmaW5lZCkge1xuXHRcdHBhcmVudC5jaGlsZHJlbltpbmRleF0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIGVsZW1lbnQpO1xuXHR9IGVsc2Uge1xuXHRcdHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcsIGVsZW1lbnQpO1xuXHR9XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC/0L7Qu9GD0YfQtdC90LjRjyDQuNC90LTQtdC60YHQsCDQstC90YPRgtGA0Lgg0YDQvtC00LjRgtC10LvRj1xuRHluYW1pY0FkYXB0LnByb3RvdHlwZS5pbmRleEluUGFyZW50ID0gZnVuY3Rpb24gKHBhcmVudCwgZWxlbWVudCkge1xuXHRjb25zdCBhcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHBhcmVudC5jaGlsZHJlbik7XG5cdHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBlbGVtZW50KTtcbn07XG5cbi8vINCk0YPQvdC60YbQuNGPINGB0L7RgNGC0LjRgNC+0LLQutC4INC80LDRgdGB0LjQstCwINC/0L4gYnJlYWtwb2ludCDQuCBwbGFjZSBcbi8vINC/0L4g0LLQvtC30YDQsNGB0YLQsNC90LjRjiDQtNC70Y8gdGhpcy50eXBlID0gbWluXG4vLyDQv9C+INGD0LHRi9Cy0LDQvdC40Y4g0LTQu9GPIHRoaXMudHlwZSA9IG1heFxuRHluYW1pY0FkYXB0LnByb3RvdHlwZS5hcnJheVNvcnQgPSBmdW5jdGlvbiAoYXJyKSB7XG5cdGlmICh0aGlzLnR5cGUgPT09IFwibWluXCIpIHtcblx0XHRBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKGFyciwgZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdGlmIChhLmJyZWFrcG9pbnQgPT09IGIuYnJlYWtwb2ludCkge1xuXHRcdFx0XHRpZiAoYS5wbGFjZSA9PT0gYi5wbGFjZSkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGEucGxhY2UgPT09IFwiZmlyc3RcIiB8fCBiLnBsYWNlID09PSBcImxhc3RcIikge1xuXHRcdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhLnBsYWNlID09PSBcImxhc3RcIiB8fCBiLnBsYWNlID09PSBcImZpcnN0XCIpIHtcblx0XHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBhLnBsYWNlIC0gYi5wbGFjZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGEuYnJlYWtwb2ludCAtIGIuYnJlYWtwb2ludDtcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKGFyciwgZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdGlmIChhLmJyZWFrcG9pbnQgPT09IGIuYnJlYWtwb2ludCkge1xuXHRcdFx0XHRpZiAoYS5wbGFjZSA9PT0gYi5wbGFjZSkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGEucGxhY2UgPT09IFwiZmlyc3RcIiB8fCBiLnBsYWNlID09PSBcImxhc3RcIikge1xuXHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGEucGxhY2UgPT09IFwibGFzdFwiIHx8IGIucGxhY2UgPT09IFwiZmlyc3RcIikge1xuXHRcdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBiLnBsYWNlIC0gYS5wbGFjZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGIuYnJlYWtwb2ludCAtIGEuYnJlYWtwb2ludDtcblx0XHR9KTtcblx0XHRyZXR1cm47XG5cdH1cbn07XG5cbmNvbnN0IGRhID0gbmV3IER5bmFtaWNBZGFwdChcIm1heFwiKTtcbmRhLmluaXQoKTtcblxualF1ZXJ5KGZ1bmN0aW9uICgpIHtcbiAgICBqUXVlcnkoJy5zcG9pbGVyX19idXJnZXInKS5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgalF1ZXJ5KCcuc3BvaWxlcl9fY29udGVudCcpLnNsaWRlVG9nZ2xlKDIwMCk7XG4gICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5M3B4KVwiKS5tYXRjaGVzKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5kcm9wZG93bi1zcG9pbGVyJykudG9nZ2xlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA5OTJweClcIikubWF0Y2hlcykge1xuXG4gICAgICAgIGpRdWVyeSgnLnNwb2lsZXJfX2xhYmVsLWRyb3Bkb3duJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgalF1ZXJ5KF90aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBjb25zdCBkcm9wZG93biA9ICQoX3RoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLXNwb2lsZXInKSk7XG4gICAgICAgICAgICBkcm9wZG93bi5zbGlkZVRvZ2dsZSgzMDApO1xuICAgICAgICB9KVxuXG4gICAgICAgIGpRdWVyeSgnLnNwb2lsZXJfX2xhYmVsLWRyb3Bkb3duIC5zcG9pbGVyX19saW5rJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSlcblxuICAgICAgICBqUXVlcnkoJy5mb3JtLWNvbnRlbnRfX2xhYmVsJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuICAgIH1cblxufSlcblxualF1ZXJ5KGZ1bmN0aW9uICgpIHtcblxuICAgIGpRdWVyeSgnLnNsaWRlcl9fd3JhcHBlcicpLnNsaWNrKHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICBhcnJvd3M6IHRydWUsXG4gICAgICAgIG1vYmlsZUZpcnN0OiB0cnVlLFxuICAgICAgICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwiYXJyb3cgYXJyb3dfX2xlZnRcIj4mIzYwJiM2MDwvZGl2PicsXG4gICAgICAgIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJhcnJvdyBhcnJvd19fcmlnaHRcIj4mIzYyJiM2MjwvZGl2PicsXG4gICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVBhZ2luZzogZnVuY3Rpb24gKHNsaWRlciwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU3JjID0gJChzbGlkZXIuJHNsaWRlc1tpXSkuZmluZCgnaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxpbWcgc3JjPVwiJHtpbWFnZVNyY31cIiBhbHQ9XCJzbGlkZSBoZXJlXCIgZGF0YS1pbmRleD1cIiR7aX1cIj5gO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH0pO1xufSkiXSwiZmlsZSI6Im1haW4uanMifQ==
